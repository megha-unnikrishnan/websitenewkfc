(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[14],{427:function(o,e,n){"use strict";n.r(e),n.d(e,"getDistanceByLatLong",(function(){return M})),n.d(e,"getGeoCodeByAddress",(function(){return k})),n.d(e,"getGeoLatLngByGeoCode",(function(){return b})),n.d(e,"getGeoLatLngByAddress",(function(){return y})),n.d(e,"GoogleMap",(function(){return E}));var i,t,r,a,l=n(28),d=n(32),s=n(0),u=n(8),v=n(2),c=n.n(v),g=n(4),p=n.n(g),f=(n(16),n(13),n(3),n(224)),L=n(69),m=n(38),w=n(5),M=function(o){var e,n;if(null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps){var i=new window.google.maps.DistanceMatrixService;return new Promise((function(e,n){i.getDistanceMatrix({origins:[I(null===o||void 0===o?void 0:o.origins)],destinations:[I(null===o||void 0===o?void 0:o.destinations)],travelMode:(null===o||void 0===o?void 0:o.travelMode)||window.google.maps.TravelMode.DRIVING,unitSystem:(null===o||void 0===o?void 0:o.unitSystem)||window.google.maps.UnitSystem.METRIC,avoidHighways:(null===o||void 0===o?void 0:o.avoidHighways)||!1,avoidTolls:(null===o||void 0===o?void 0:o.avoidTolls)||!1},(function(o,i){var t,r,a,l;i!==(null===(t=window)||void 0===t||null===(r=t.google)||void 0===r||null===(a=r.maps)||void 0===a||null===(l=a.GeocoderStatus)||void 0===l?void 0:l.OK)&&n(i),console.debug(o);var d=[];null===o||void 0===o||o.rows.forEach((function(e,n){var i,t,r,a,l;return d.push({destinationAddresses:null===o||void 0===o||null===(i=o.destinationAddresses)||void 0===i?void 0:i[n],originAddresses:null===o||void 0===o||null===(t=o.originAddresses)||void 0===t?void 0:t[n],distance:null===e||void 0===e||null===(r=e.elements)||void 0===r?void 0:r[0].distance,duration:null===e||void 0===e||null===(a=e.elements)||void 0===a?void 0:a[0].duration,status:null===e||void 0===e||null===(l=e.elements)||void 0===l?void 0:l[0].status})})),e(d)}))}))}},k=function(o){var e,n;if(null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps){var i=new window.google.maps.Geocoder;return new Promise((function(e,n){i.geocode({address:o},(function(o,i){var t,r,a,l;i!==(null===(t=window)||void 0===t||null===(r=t.google)||void 0===r||null===(a=r.maps)||void 0===a||null===(l=a.GeocoderStatus)||void 0===l?void 0:l.OK)&&n(i),e(o)}))}))}return null},b=function(o){var e,n;return null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps&&o?new Promise((function(e,n){try{var i,t=Array.isArray(o)?o[0]:o;e(null===t||void 0===t||null===(i=t.geometry)||void 0===i?void 0:i.location)}catch(r){n(r)}})):null},y=function(){var o=Object(u.a)(c.a.mark((function o(e){var n,i;return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,k(e);case 2:return n=o.sent,o.next=5,b(n);case 5:return i=o.sent,o.abrupt("return",i);case 7:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),C=function(o){var e,n,i=o.gMapContainerRef,t=o.gMapDetails;if(null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps&&i){var r=t.center,a=t.disableDefaultUI,l=t.fullscreenControl,d=t.zoomControl,s=t.gestureHandling,u=t.zoom,v=t.minZoom,c=t.maxZoom,g=t.mapTypeId,p=t.panControl,f=t.rotateControl,L=t.scaleControl,m=t.stylers;return new window.google.maps.Map(null===i||void 0===i?void 0:i.current,{mapTypeId:g,center:r,disableDefaultUI:a,fullscreenControl:l,zoom:u,zoomControl:d,gestureHandling:s,minZoom:v,maxZoom:c,panControl:p,rotateControl:f,scaleControl:L,styles:m})}},O=function(o){var e,n,i,t;(null===(e=window)||void 0===e||null===(n=e.google)||void 0===n?void 0:n.maps)&&(null===o||void 0===o||null===(i=o.gMapDetails)||void 0===i||null===(t=i.gMapInstance)||void 0===t||t.setCenter(new window.google.maps.LatLng(null===o||void 0===o?void 0:o.latLng)))},S=function(o,e){var n;return null===(n=I(o))||void 0===n?void 0:n.equals(I(e))},I=function(o){var e,n;if(null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps&&o){var i="string"===typeof o?null===o||void 0===o?void 0:o.split(","):o;if(null!==Array&&void 0!==Array&&Array.isArray(i))return new window.google.maps.LatLng(i[0],i[1]);if("object"===typeof i)return null!==i&&void 0!==i&&i.latitude&&null!==i&&void 0!==i&&i.longitude?new window.google.maps.LatLng(null===i||void 0===i?void 0:i.latitude,null===i||void 0===i?void 0:i.longitude):new window.google.maps.LatLng(i)}return o},D=function(o){var e,n,i,t,r,a,l=o.gMapDetails,d=o.directionsPolyline,s=o.origin,u=o.destination,v=o.isRaiderTracker,c=l.raiderDirectionsService;null===c||void 0===c||null===(e=c.route({origin:s,destination:u,travelMode:null===(i=window)||void 0===i||null===(t=i.google)||void 0===t||null===(r=t.maps)||void 0===r||null===(a=r.TravelMode)||void 0===a?void 0:a.DRIVING}))||void 0===e||null===(n=e.then((function(o){var e,n,i,t,r,a;null!==o&&void 0!==o&&null!==(e=o.routes)&&void 0!==e&&e[0]&&(null===d||void 0===d||d.setPath(null===o||void 0===o||null===(n=o.routes)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.overview_path),v&&(null===l||void 0===l||null===(t=l.gMapInstance)||void 0===t||t.fitBounds(null===o||void 0===o||null===(r=o.routes)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.bounds)))})))||void 0===n||n.catch((function(o){return console.debug("Directions request failed due to "+o)}))},P=function(o){var e,n,i=o.gMapDetails,t=o.animation,r=void 0===t?null:t,a=o.position,l=o.icon,d=o.zIndex,s=void 0===d?1:d,u=i.gMapInstance,v=i.isMarkerVisible;return null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps&&u?new window.google.maps.Marker({animation:r,position:a,map:u,visible:v,icon:l,zIndex:s}):null},j=function(){var o=Object(u.a)(c.a.mark((function o(e,n){var i,t,r,a,l,d,u,v,g,p,f,L,m;return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=e.orderTracking,t=void 0!==i&&i,r=e.storeAddress,a=void 0===r?null:r,l=e.storeLatLng,d=void 0===l?null:l,u=e.customerAddress,v=void 0===u?null:u,g=e.customerLatLng,p=void 0===g?null:g,f={orderTracking:t},!a){o.next=7;break}return o.next=5,y(a);case 5:L=o.sent,f=Object(s.a)(Object(s.a)({},f),{},{storeLatLng:L,raiderPastCurrentLatLng:L,storeAddress:a});case 7:if(d&&(f=Object(s.a)(Object(s.a)({},f),{},{storeLatLng:I(d),raiderPastCurrentLatLng:I(d),storeAddress:a})),!v){o.next=13;break}return o.next=11,y(v);case 11:m=o.sent,f=Object(s.a)(Object(s.a)({},f),{},{customerLatLng:m,customerAddress:v});case 13:p&&(f=Object(s.a)(Object(s.a)({},f),{},{customerLatLng:I(p),customerAddress:v})),n(f);case 15:case"end":return o.stop()}}),o)})));return function(e,n){return o.apply(this,arguments)}}(),h=function(o){var e,n,i=o.gMapDetails,t=o.updateGMapDetails,r=i.gMapInstance,a=i.orderTracking,l=i.customerLatLng,s=i.storeLatLng,u=i.raiderCurrentLatLng,v=i.raiderCurrentMarker,c=i.raiderDirectionsPolyline,g=i.raiderLatLngList;if(null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps&&r&&a&&l&&s&&u){var p,L,m,w;if(t({raiderLatLngList:[].concat(Object(d.a)(g),[u])}),S(s,u)||function(o){var e,n,i=null===o||void 0===o?void 0:o.gMapDetails,t=i.gMapInstance,r=i.orderTracking,a=i.raiderPastCurrentLatLng,l=i.raiderCurrentLatLng,d=i.raiderPastStrokeColor,s=i.raiderPastStrokeWeight,u=i.raiderPastStrokeOpacity;if(null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps&&t&&r){var v=new window.google.maps.Polyline({strokeColor:d,strokeWeight:s,strokeOpacity:u,map:t});D({gMapDetails:null===o||void 0===o?void 0:o.gMapDetails,directionsPolyline:v,origin:a,destination:l})}}({gMapDetails:i,updateGMapDetails:t}),D({gMapDetails:i,directionsPolyline:c,origin:u,destination:l,isRaiderTracker:!0}),null!==v)null===v||void 0===v||v.setPosition(u);else t({raiderCurrentMarker:P({gMapDetails:i,position:u,icon:null===f.a||void 0===f.a?void 0:f.a.MarkerRaider,zIndex:5,animation:null===(p=window)||void 0===p||null===(L=p.google)||void 0===L||null===(m=L.maps)||void 0===m||null===(w=m.Animation)||void 0===w?void 0:w.DROP})});t({raiderPastCurrentLatLng:u})}},T=function(){var o=Object(u.a)(c.a.mark((function o(){return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,m.b.BindLocation();case 2:return o.abrupt("return",m.b.address&&m.b.coordinates);case 3:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}(),A=function(){var o=Object(u.a)(c.a.mark((function o(e){var n,i,t;return c.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,T();case 2:o.sent&&(n=m.b.coordinates,i=n.longitude,t=n.latitude,O({gMapDetails:e,latLng:{lat:t,lng:i}}));case 4:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),G={gMapInstance:null,defaultLatLng:[{lat:0,lng:0}],raiderPastCurrentLatLng:null,raiderCurrentLatLng:null,raiderCurrentMarker:null,raiderDirectionsPolyline:null,raiderDirectionsService:null,raiderLatLngList:[],mapTypeId:null===(i=window)||void 0===i||null===(t=i.google)||void 0===t||null===(r=t.maps)||void 0===r||null===(a=r.MapTypeId)||void 0===a?void 0:a.ROADMAP,center:{lat:0,lng:0},disableDefaultUI:!0,fullscreenControl:!1,zoomControl:!0,zoom:13,gestureHandling:"greedy",minZoom:6,maxZoom:20,panControl:!1,rotateControl:!0,scaleControl:!0,isMobile:!1,isMarkerVisible:!0,orderTracking:!1,customerAddress:null,customerLatLng:null,storeAddress:null,storeLatLng:null,raiderPastStrokeColor:"#202124",raiderPastStrokeWeight:2,raiderPastStrokeOpacity:.8,raiderStrokeColor:"#e4002b",raiderStrokeWeight:4,raiderStrokeOpacity:1,stylers:[]},E=function(o){var e,n,i=p.a.createRef(),t=Object(g.useState)(G),r=Object(l.a)(t,2),a=r[0],d=r[1],u=Object(g.useCallback)((function(o){d&&d((function(e){return Object(s.a)(Object(s.a)({},e),o)}))}),[]);return Object(g.useEffect)((function(){var o,e;null===(o=window)||void 0===o||null===(e=o.google)||void 0===e||!e.maps||!i||null!==a&&void 0!==a&&a.gMapInstance||(console.debug("GoogleMap - useEffect Map => "),u({gMapInstance:C({gMapContainerRef:i,gMapDetails:a}),raiderDirectionsService:new window.google.maps.DirectionsService}))}),[null===(e=window)||void 0===e||null===(n=e.google)||void 0===n?void 0:n.maps]),Object(g.useEffect)((function(){console.debug("GoogleMap - useEffect gMapInstance => "),(null===a||void 0===a?void 0:a.gMapInstance)&&j(o,u)}),[null===a||void 0===a?void 0:a.gMapInstance]),Object(g.useEffect)((function(){console.debug("GoogleMap - useEffect mapTypeId => "),(null===a||void 0===a?void 0:a.gMapInstance)&&function(o){var e,n,i,t,r,a,l;(null===(e=window)||void 0===e||null===(n=e.google)||void 0===n?void 0:n.maps)&&(null===o||void 0===o||null===(i=o.gMapInstance)||void 0===i||i.setMapTypeId(null===(t=window)||void 0===t||null===(r=t.google)||void 0===r||null===(a=r.maps)||void 0===a||null===(l=a.MapTypeId)||void 0===l?void 0:l[null===o||void 0===o?void 0:o.mapTypeId]))}(a)}),[null===a||void 0===a?void 0:a.mapTypeId]),Object(g.useEffect)((function(){console.debug("GoogleMap - useEffect props mapTypeId => "),u({mapTypeId:null===o||void 0===o?void 0:o.mapTypeId})}),[null===o||void 0===o?void 0:o.mapTypeId]),Object(g.useEffect)((function(){var o=a.gMapInstance,e=a.orderTracking,n=a.customerLatLng;o&&e&&n&&(console.debug("GoogleMap - useEffect customer LatLng => "),P({gMapDetails:a,position:n,icon:null===f.a||void 0===f.a?void 0:f.a.MarkerCustomer}),O({gMapDetails:a,latLng:n}))}),[null===a||void 0===a?void 0:a.customerLatLng]),Object(g.useEffect)((function(){var o=a.gMapInstance,e=a.orderTracking,n=a.storeLatLng;o&&e&&n&&(console.debug("GoogleMap - useEffect store LatLng => "),P({gMapDetails:a,position:n,icon:null===f.a||void 0===f.a?void 0:f.a.MarkerKFC}),O({gMapDetails:a,latLng:n}))}),[null===a||void 0===a?void 0:a.storeLatLng]),Object(g.useEffect)((function(){var o=a.gMapInstance,e=a.orderTracking,n=a.customerLatLng,i=a.storeLatLng;o&&e&&n&&i&&(console.debug("GoogleMap - useEffect store & customer LatLng => "),function(o){var e,n,i=null===o||void 0===o?void 0:o.gMapDetails,t=i.gMapInstance,r=i.orderTracking,a=i.customerLatLng,l=i.storeLatLng,d=i.raiderStrokeColor,s=i.raiderStrokeWeight,u=i.raiderStrokeOpacity;if(null!==(e=window)&&void 0!==e&&null!==(n=e.google)&&void 0!==n&&n.maps&&t&&r){var v=new window.google.maps.Polyline({strokeColor:d,strokeWeight:s,strokeOpacity:u,map:t});null===o||void 0===o||o.updateGMapDetails({raiderDirectionsPolyline:v}),D({gMapDetails:null===o||void 0===o?void 0:o.gMapDetails,directionsPolyline:v,origin:l,destination:a,isRaiderTracker:!0})}}({gMapDetails:a,updateGMapDetails:u}))}),[null===a||void 0===a?void 0:a.customerLatLng,null===a||void 0===a?void 0:a.storeLatLng]),Object(g.useEffect)((function(){var e=a.gMapInstance,n=a.orderTracking;console.debug("GoogleMap - useEffect props raiderCurrentLatLng => ",null===o||void 0===o?void 0:o.raiderCurrentLatLng),e&&n&&null!==o&&void 0!==o&&o.raiderCurrentLatLng&&u({raiderCurrentLatLng:I(null===o||void 0===o?void 0:o.raiderCurrentLatLng)})}),[null===o||void 0===o?void 0:o.raiderCurrentLatLng]),Object(g.useEffect)((function(){console.debug("GoogleMap - useEffect raiderCurrentLatLng => ",null===a||void 0===a?void 0:a.raiderCurrentLatLng),h({gMapDetails:a,updateGMapDetails:u})}),[null===a||void 0===a?void 0:a.raiderCurrentLatLng]),Object(g.useEffect)((function(){var e=o.isMobile,n=void 0===e?null===G||void 0===G?void 0:G.isMobile:e,i=o.isMarkerVisible,t=void 0===i?null===G||void 0===G?void 0:G.isMarkerVisible:i,r=o.orderTracking,a=void 0===r?null===G||void 0===G?void 0:G.orderTracking:r,l=o.raiderPastStrokeColor,d=void 0===l?null===G||void 0===G?void 0:G.raiderPastStrokeColor:l,s=o.raiderPastStrokeWeight,v=void 0===s?null===G||void 0===G?void 0:G.raiderPastStrokeWeight:s,c=o.raiderPastStrokeOpacity,g=void 0===c?null===G||void 0===G?void 0:G.raiderPastStrokeOpacity:c,p=o.raiderStrokeColor,f=void 0===p?null===G||void 0===G?void 0:G.raiderStrokeColor:p,L=o.raiderStrokeWeight,m=void 0===L?null===G||void 0===G?void 0:G.raiderStrokeWeight:L,w=o.raiderStrokeOpacity,M=void 0===w?null===G||void 0===G?void 0:G.raiderStrokeOpacity:w,k=o.stylers,b=void 0===k?null===G||void 0===G?void 0:G.stylers:k;console.debug("GoogleMap - useEffect props config => "),u({isMobile:n,isMarkerVisible:t,orderTracking:a,raiderPastStrokeColor:d,raiderPastStrokeWeight:v,raiderPastStrokeOpacity:g,raiderStrokeColor:f,raiderStrokeWeight:m,raiderStrokeOpacity:M,stylers:b})}),[null===o||void 0===o?void 0:o.isMobile,null===o||void 0===o?void 0:o.isMarkerVisible,null===o||void 0===o?void 0:o.orderTracking,null===o||void 0===o?void 0:o.raiderPastStrokeColor,null===o||void 0===o?void 0:o.raiderPastStrokeWeight,null===o||void 0===o?void 0:o.raiderPastStrokeOpacity,null===o||void 0===o?void 0:o.raiderStrokeColor,null===o||void 0===o?void 0:o.raiderStrokeWeight,null===o||void 0===o?void 0:o.raiderStrokeOpacity,null===o||void 0===o?void 0:o.stylers]),Object(g.useEffect)((function(){var o,e;null!==(o=window)&&void 0!==o&&null!==(e=o.google)&&void 0!==e&&e.maps&&null!==a&&void 0!==a&&a.gMapInstance&&(null===a||void 0===a||a.gMapInstance.setOptions({styles:null===a||void 0===a?void 0:a.stylers}))}),[null===a||void 0===a?void 0:a.gMapInstance,null===a||void 0===a?void 0:a.stylers]),Object(g.useEffect)((function(){var e,n,i=o.customerAddress,t=void 0===i?null:i,r=o.customerLatLng,l=void 0===r?null:r,d=o.storeAddress,s=void 0===d?null:d,v=o.storeLatLng,c=void 0===v?null:v;null===(e=window)||void 0===e||null===(n=e.google)||void 0===n||!n.maps||S(null===a||void 0===a?void 0:a.customerLatLng,l)&&S(null===a||void 0===a?void 0:a.storeLatLng,c)||(console.debug("GoogleMap - useEffect Props store & customer LatLng => "),u({customerAddress:t,customerLatLng:I(l),storeAddress:s,storeLatLng:I(c)}))}),[null===o||void 0===o?void 0:o.customerAddress,null===o||void 0===o?void 0:o.customerLatLng,null===o||void 0===o?void 0:o.storeAddress,null===o||void 0===o?void 0:o.storeLatLng]),Object(w.jsxs)("div",{className:"googleMapContPanel",children:[Object(w.jsx)("div",{className:"use-location-icon",children:Object(w.jsx)(L.a,{srcFile:null===f.a||void 0===f.a?void 0:f.a.UseLocationWhiteIcon,alt:"",onClick:function(){return A(a)},"data-testid":"use-location-icon"})}),Object(w.jsx)("div",{id:"google-map-container",ref:i,className:"googleMapContainer ".concat(null===o||void 0===o?void 0:o.className)})]})};e.default=E}}]);