(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[5],{759:function(e,t,n){"use strict";t.a={contentData:{scheduleOrderHeaderText:"scheduleOrder",changeScheduleOrderHeaderText:"changeYourOrderTitle",scheduleOrderModalContent:{formContent:{orderTypeTitle:"orderType",restaurantTitle:"YourKFCLocation",yourLocationTitle:"yourLocation",editTitle:"edit",scheduleDateTitle:"scheduleForYourOrder",dateTitle:"date",timeTitle:"time",buttonText:"confirm",dateOptions:["Today","23/03/2021","24/03/2021"],timeOptions:[9.3,10,10.3,11]}},DELIVERY_NA_WARNING_MESSAGE:"noStoresWithDeliveryHeader",DELIVERY_PICKUP_NA_MESSAGE:"deliverystoresWithoutAnyServiceHeader",SWITCH_TO_TAKEAWAY:"switchToTakeaway",errorMessageInactive:"errorMessageInactive",errorMessageClosed:"errorMessageClosed"},timingsSampleData:{operatingHours:[{day:"EVERYDAY",availableHours:{from:"10:00",to:"23:00"}}],asap:{isAvailable:!0,promiseTime:0},scheduled:{date:"2021-05-05",periods:[{startEndTime:{from:"11:30",to:"23:00"},interval:15}],unavailibilities:[]},futureDates:["2021-05-06"]}}},766:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(0),c=n(70),a=(n(4),n(5)),i=["onKeyPressHandler","value","inputType","ref"],r=function(e){var t=e.onKeyPressHandler,n=void 0===t?null:t,r=e.value,s=void 0===r?"":r,d=e.inputType,l=void 0===d?"":d,u=(e.ref,Object(c.a)(e,i));return Object(a.jsx)("input",Object(o.a)({"data-testid":"check-input-box",value:s,onChange:function(e){return e.preventDefault()},onKeyPress:n,type:l},u))}},773:function(e,t,n){"use strict";n.d(t,"v",(function(){return E})),n.d(t,"l",(function(){return A})),n.d(t,"c",(function(){return I})),n.d(t,"o",(function(){return T})),n.d(t,"p",(function(){return C})),n.d(t,"u",(function(){return _})),n.d(t,"i",(function(){return y})),n.d(t,"w",(function(){return k})),n.d(t,"x",(function(){return w})),n.d(t,"k",(function(){return S})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return P})),n.d(t,"f",(function(){return M})),n.d(t,"m",(function(){return L})),n.d(t,"a",(function(){return Y})),n.d(t,"n",(function(){return F})),n.d(t,"y",(function(){return R})),n.d(t,"s",(function(){return H})),n.d(t,"t",(function(){return K})),n.d(t,"d",(function(){return W})),n.d(t,"q",(function(){return V})),n.d(t,"r",(function(){return U})),n.d(t,"b",(function(){return G})),n.d(t,"e",(function(){return q})),n.d(t,"j",(function(){return Q}));var o=n(0),c=n(790),a=n(20),i=n(7),r=n(12),s=n(178),d=n(10),l=n(793),u=n(233),b=n(228),j=n(69),v=n(759),m=n(760),p=n(3),O=n(95),h=n(5),f=r.a.ANALYTICS_LOCALISATION_SIGNIN,x=v.a.contentData,g=x.scheduleOrderHeaderText,N=x.changeScheduleOrderHeaderText,E=function(e){return e?"formElement-error":"formElement"},A=function(e,t){e&&t()},I=function(e){return e?"text-danger":" "},T=function(e){return e?" mobile":""},C=function(e){return e?"":" px-rt-5px"},_=function(){localStorage.setItem(f,JSON.stringify(!0)),Object(O.b)()},y=function(e){var t=e.date,n=e.time,o=s.c.ASAP,c="";if(t&&n){var i=Object(a.f)(t,"YYYYMMDD")===Object(a.d)("YYYYMMDD")?Object(d.e)("today"):Object(d.e)("tomorrow"),r=n;c=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("label",{children:i}),Object(h.jsx)("span",{children:r})]})}return"ASAP"===n&&(c=Object(h.jsx)("label",{children:Object(d.e)(o)})),c},k=function(e){var t,n=s.c.CHECKOUT_TITLES,o=s.c.IS_DELIVERY,c=s.c.IS_TAKEAWAY,a=s.c.IS_DINEIN;return Object(i.Pd)(e)===o&&(t=n.DELIVERY_INFO),Object(i.Pd)(e)===c&&(t=n.TAKEAWAY_INFO),Object(i.Pd)(e)===a&&(t=n.DINEIN_INFO),t},w=function(e){var t,n=s.c.CHECKOUT_TITLES,o=s.c.IS_DELIVERY,c=s.c.IS_TAKEAWAY,a=s.c.IS_DINEIN;return Object(i.Pd)(e)===o&&(t=n.DELIVERY_OPTIONS),Object(i.Pd)(e)===c&&(t=n.TAKEAWAY_OPTIONS),Object(i.Pd)(e)===a&&(t=n.DINEIN_OPTIONS),t},S=function(e,t){var n=Object(o.a)({},e);return n.value=t,n.error=!t,n},D=function(e,t){var n,c=Object(o.a)({},e);return c.value=t,!t||t.length<2?(c.error=!0,c.errorMessage=Object(d.e)("emptyFullNameErrMsg")):(n=t,!s.b.test(n)||t.length>26?(c.error=!0,c.errorMessage=Object(d.e)("invalidFullNameErrMsg")):(c.error=!1,c.errorMessage="")),c},P=function(e,t){var n=Object(o.a)({},e);return n.value=t,t?t.length<10||t.length>12||isNaN(t)||!/^\d*$/.test(t)?(n.error=!0,n.errorMessage=Object(d.e)("invalidPhoneNumberErrMsg")):(n.error=!1,n.errorMessage=""):(n.error=!0,n.errorMessage=Object(d.e)("emptyPhoneNumberErrMsg")),n},M=function(e,t){var n,c=Object(o.a)({},e);return c.value=t,t?(n=t,s.a.test(null===n||void 0===n?void 0:n.toLowerCase())?(c.error=!1,c.errorMessage=""):(c.error=!0,c.errorMessage=Object(d.e)("invalidEmailErrMsg"))):(c.error=!0,c.errorMessage=Object(d.e)("emptyEmailErrMsg")),c},L=function(e){var t=Object(o.a)({},e),n=t.firstName,c=void 0===n?"":n,a=t.middleName,i=void 0===a?"":a,r=t.lastName,s=void 0===r?"":r,d=t.email,l=void 0===d?"":d,u=t.phone,b=void 0===u?"":u,j=t.phoneNumber;return{fullName:c||(""+i?i:""+s?s:""),email:l,phone:""!==b?b:void 0===j?"":j}},Y=function(e,t,n,o){var a;if(null!==e&&void 0!==e&&null!==(a=e.foodLines)&&void 0!==a&&a.length){var i=[];null===e||void 0===e||e.foodLines.forEach((function(e,t){var c,a,r,s,d=(e.amount/n).toFixed(2),l=null!==(c=null===o||void 0===o?void 0:o[null===(a=e.item)||void 0===a?void 0:a.id])&&void 0!==c?c:{},u=l.categoryId,b=void 0===u?"NA":u,j=l.categoryName,v=void 0===j?"NA":j;i.push({item_name:(null===(r=e.item)||void 0===r?void 0:r.dname[0].value)||"NA",item_id:(null===(s=e.item)||void 0===s?void 0:s.id)||"NA",price:parseFloat(d)||"NA",item_category:v,item_list_name:v,item_list_id:b,index:t+1,quantity:e.quantity||"NA"})})),"AddContactInfoClick"===t&&Object(c.a)(i),"BeginCheckoutClick"===t&&Object(c.b)(i)}},F=function(e,t,n,c){var a=s.c.IS_DELIVERY,r=s.c.IS_TAKEAWAY,l=Object(o.a)({},e);return l.value=t,Object(i.Pd)(n)===a?(l.error=!1,l.errorMessage=""):t||Object(i.Pd)(n)!==r||"handittome"!==c?t.length<2&&Object(i.Pd)(n)===r&&"handittome"===c?(l.error=!0,l.errorMessage=Object(d.e)("invalidVehicalInformation")):(l.error=!1,l.errorMessage=""):(l.error=!0,l.errorMessage=Object(d.e)("pleaseEnterYourVehicalInformation")),l},R=function(e,t,n,o){var a,i=[];null===e||void 0===e||null===(a=e.foodLines)||void 0===a||a.forEach((function(e,n){var c,a,r,s,d=null!==(c=null===o||void 0===o?void 0:o[null===e||void 0===e||null===(a=e.item)||void 0===a?void 0:a.id])&&void 0!==c?c:{},l=d.categoryId,u=void 0===l?"NA":l,b=d.categoryName,j=void 0===b?"NA":b;i.push({item_name:(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.name)||"NA",item_id:(null===e||void 0===e||null===(s=e.item)||void 0===s?void 0:s.id)||"NA",price:Number(((null===e||void 0===e?void 0:e.unitPrice)/t).toFixed(2))||0,item_category:j,item_list_name:j,item_list_id:u,index:n+1,quantity:(null===e||void 0===e?void 0:e.quantity)||0})})),Object(c.e)(null===n||void 0===n?void 0:n.name,i)},B=function(e){var t,n,o,c,a,i=null!==e&&void 0!==e&&null!==(t=e.response)&&void 0!==t&&t.response?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.response)||void 0===o?void 0:o.data:null===e||void 0===e?void 0:e.response,r="";return null!==i&&void 0!==i&&i.errors&&(null===i||void 0===i?void 0:i.errors.length)>0?r=Array.isArray(null===i||void 0===i?void 0:i.errors)?null===i||void 0===i?void 0:i.errors[0]:null===i||void 0===i?void 0:i.errors:null!==i&&void 0!==i&&i.errorMessages&&(r=Array.isArray(null===i||void 0===i?void 0:i.errorMessages)?null===i||void 0===i?void 0:i.errorMessages[0]:null===i||void 0===i?void 0:i.errorMessages),r=null!==(c=r)&&void 0!==c&&c.message?null===(a=r)||void 0===a?void 0:a.message:r},H=function(e,t,n){var o=l.a.PAYMENT_FAILED_MESSAGE,c=l.a.PAYMENT_PRE_VALIDATION_FAILED_MESSAGE,a="";return n?a=Object(d.e)(c):t?a=Object(d.e)(o):e&&null!==e&&void 0!==e&&e.error&&(a=B(e)),""!==a&&Object(h.jsxs)("div",{className:"row row-cols-12 mt-10px payment-failed-error-box",children:[Object(h.jsx)(j.a,{srcFile:b.a,className:"mt-3px mr-5px"}),Object(h.jsx)("div",{className:"ml-10px",children:a})]})},K=function(e,t,n){var o=l.a.PAYMENT_FAILED_MESSAGE,c=l.a.PAYMENT_PRE_VALIDATION_FAILED_MESSAGE,a="";n?a=Object(d.e)(c):t?a=Object(d.e)(o):e&&null!==e&&void 0!==e&&e.error&&(a=B(e)),""!==a&&(Object(i.ub)(document.title,a),Object(i.rc)(a))},W=function(e,t){"PICKUP"===e&&(t="leaveatmydoor"===t?"in-store":"KFC to your Car");var n=sessionStorage.getItem("setAttributePayload");n&&((n=JSON.parse(n)).CollectionPoint=t,Object(i.ge)(n))},V=function(e,t){var n=s.c.IS_TAKEAWAY,o=s.c.IS_CURBSIDE;return t!==n||Array.isArray(e)&&e.length>0&&Boolean(e.find((function(e){return e.collectionPointName===o})))},U=function(e,t){t&&null!==t&&void 0!==t&&t.error&&null!==t&&void 0!==t&&t.response&&(e(Object(u.e)()),e(Object(u.a)({value:[]}))),e(Object(m.d)()),sessionStorage.setItem(p.ac.ORDER_TRACKING,null)},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t&&Object(i.ub)(e,n)},q=function(e,t){t&&"NA"!==t&&Object(i.ub)(e,t)},Q=function(e,t){var n=e?Object(d.e)(N):Object(d.e)(g);t&&Object(i.ub)(n,t)}},781:function(e,t,n){"use strict";var o=n(28),c=n(4),a=n(230),i=n(5);t.a=function(e){var t=e.endTime,n=void 0===t?new Date:t,r=Object(c.useState)(Object(a.d)(n)),s=Object(o.a)(r,2),d=s[0],l=s[1];return Object(c.useEffect)((function(){var e;return Object(a.g)(n)?e=setTimeout((function(){l(Object(a.d)(n))}),1e3):l("00HR : 00M : 00S"),function(){clearTimeout(e)}})),Object(i.jsx)("span",{"data-testid":"timer","aria-live":"polite",children:d})}},790:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return p}));var o=n(8),c=n(2),a=n.n(c),i=n(24),r=n(14),s=n(7),d=n(3),l=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.registerEvent(r.a.guestContactDetails.name,{"%event%":"guestContactDetails"},s.lb);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.registerEvent(r.a.addContactInfo.name,{data:{event:"add_contact_info",ecommerce:{checkout_cart:{items:t}}}},s.lb);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.registerEvent(r.a.beginCheckoutPwa.name,{data:{event:"begin_checkout",ecommerce:{checkout_cart:{items:t}}}},s.lb);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.registerEvent(r.a.paymentInfoClick.name,{data:{event:"add_payment_info",paymentType:t,ecommerce:{checkout_cart:{items:n}}}},s.lb);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.registerEvent(null===(t=r.a.checkoutClick)||void 0===t?void 0:t.name,{data:{event:"checkoutClick"}},s.lb);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.registerEvent(null===r.a||void 0===r.a||null===(o=r.a.paymentInfoClick)||void 0===o?void 0:o.name,{data:{event:d.g.ADD_PAYMENT,userType:t,ecommerce:{checkout_cart:{items:n}}}},s.lb);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(a.a.mark((function e(t,n,o){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.registerEvent(null===r.a||void 0===r.a||null===(c=r.a.paymentInfoClick)||void 0===c?void 0:c.name,{data:{event:d.g.ADD_PAYMENT,userType:n,paymentType:t,ecommerce:{checkout_cart:{items:o}}}},s.lb);case 2:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()},793:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var o,c=n(8),a=n(2),i=n.n(a),r=function(){var t=Object(c.a)(i.a.mark((function t(){var o,c,a,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null===(o=e)||void 0===o||null===(c=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TENANT_CODE:"in",REACT_APP_API_BASE_URL:"https://online.kfc.co.in"}))||void 0===c?void 0:c.REACT_APP_TENANT_CODE,t.next=3,Promise.resolve().then(n.bind(null,137));case 3:return r=t.sent,s=r.default[a.toUpperCase()].HOME_PAGE_CONSTANTS,t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:t=e.sent,o=t.default;case 4:case"end":return e.stop()}}),e)})))()}).call(this,n(85))},805:function(e,t,n){"use strict";var o=n(28),c=n(49),a=n(4),i=n(821),r=n.p+"static/media/Offers_Coupon_Icon.72b94c41.svg",s=n(50),d=n(10),l=n(5);t.a=function(e){var t=e.bucketId,n=void 0===t?"":t,u=Object(a.useState)(!1),b=Object(o.a)(u,2),j=b[0],v=b[1],m=s.a.OFFERS_COUPONS,p=m.APPLY_OFFERS,O=m.VIEW_ALL,h=function(e){v(!1)};return Object(a.useEffect)((function(){var e=function(e){27===e.keyCode&&h()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),Object(l.jsxs)("div",{className:"cart-offers-container","data-testid":"cart-offers-coupon",children:[Object(l.jsxs)("div",{className:"cart-offers-link",children:[Object(l.jsx)("img",{src:r,alt:"",className:"cart-offers-icon"}),Object(l.jsx)("span",{className:"cart-offers-text",children:Object(d.e)(p)})]}),Object(l.jsx)(c.a,{onClickHandler:function(){return v(!0)},ariaLable:"View all offers",className:"button whiteButton blackBorder cart-offers-view-all","data-testid":"offers-toggle-btn",children:Object(d.e)(O)}),j&&Object(l.jsx)(i.a,{"data-testid":"coupon-modal",bucketId:n,isOpen:j,handleClose:h})]})}},821:function(e,t,n){"use strict";var o=n(0),c=n(28),a=n(4),i=n.n(a),r=n(88),s=n(37),d=n(252),l=n(31),u=n(260),b=n(69),j=n(60),v=n(87),m=n(7),p=n(133),O=n(766),h=n(49),f=n(230),x=n(677),g=n(16),N=n(246),E=n.p+"static/media/Time_ClockDark.bcd6727f.svg",A=n(136),I=n(781),T=n(10),C=n(13),_=n(5),y=function(e){var t=e.data,n=e.cardType,o=e.id,r=e.tenantId,s=e.applyCoupon,d=e.tenantData,l=Object(a.useState)(!1),u=Object(c.a)(l,2),j=u[0],p=u[1],O=(Object(m.fb)(window.innerWidth),function(e){return Object(_.jsx)(_.Fragment,{children:null!==e&&void 0!==e&&e.showTimer?Object(f.g)(null===e||void 0===e?void 0:e.endTime)&&Object(_.jsx)("p",{"data-testid":"coupon-header-block",className:"coupon-time",children:Object(_.jsxs)("span",{"data-testid":"coupon-time-block",className:"coupon-time-block",children:[Object(_.jsx)("img",{className:"coupon-time-icon",src:N.a,alt:""}),Object(_.jsx)(I.a,{endTime:null===e||void 0===e?void 0:e.endTime})]})}):Object(_.jsxs)("p",{"data-testid":"coupon-header-block",className:"mr-btm-0",children:[(null===e||void 0===e?void 0:e.header)&&Object(_.jsx)("span",{className:"ml-rgt coupon-time",children:null===e||void 0===e?void 0:e.header}),Object(_.jsxs)("span",{className:"coupon-expiry-details",children:[Object(_.jsx)("img",{alt:"",src:E}),Object(_.jsxs)("span",{children:[Object(_.jsx)("span",{className:"capitalize",children:"Expires\xa0"})," on ",Object(f.f)(null===e||void 0===e?void 0:e.endTime)]})]})]})})});return Object(_.jsx)(i.a.Fragment,{children:"image-text"===n?function(e,n){var o;return Object(_.jsxs)("section",{"data-testid":"coupon-container",className:"coupon-card-container",children:[Object(_.jsxs)("section",{className:"coupon-card-content text-image",children:[Object(_.jsx)("section",{className:"coupon-image-content",children:Object(_.jsx)(b.a,{className:"coupon-image",srcFile:Object(m.Eb)(null===e||void 0===e?void 0:e.imageSrc,d,!1,!1,!0),alt:"",defaultPath:"".concat(Object(g.a)(C.cb)).concat(r).concat(v.f)})}),Object(_.jsxs)("section",{className:"coupon-text-content image-text",children:[O(t),Object(_.jsx)("h4",{role:"text","data-testid":"coupon-heading-block",className:"coupon-heading margin-bottom-5",children:Object(m.Qd)(null===e||void 0===e?void 0:e.heading)}),Object(_.jsx)("h5",{role:"text","data-testid":"coupon-desc-block",className:"coupon-desc margin-bottom-5",children:Object(m.Qd)(null===e||void 0===e?void 0:e.description)}),Object(_.jsxs)("h5",{role:"text","data-testid":"coupon-terms-btn",onClick:function(){return p(!j)},className:"coupon-terms",children:[Object(T.e)(v.q),Object(_.jsx)("img",{src:A.a,alt:"",className:j?"terms-arrow inverted":"terms-arrow"})]})]}),Object(_.jsx)("section",{className:"coupon-button-container",children:Object(_.jsx)(h.a,{"data-testid":"apply-button",disabled:null===e||void 0===e?void 0:e.isApplied,onClick:function(t){return s(t,null===e||void 0===e?void 0:e.discountCode)},className:"button whiteButton blackBorder","aria-label":Object(T.e)(v.m)+" "+(null===e||void 0===e?void 0:e.heading),children:Object(_.jsx)("span",{className:"btn-text",children:null!==t&&void 0!==t&&t.isApplied?Object(T.e)(v.l):Object(T.e)(v.m)})})})]}),Object(_.jsx)("section",{"data-testid":"terms-list-block",className:j?"terms-list show":"terms-list",children:Object(_.jsx)("ul",{className:"main-terms-list",children:null===e||void 0===e||null===(o=e.termsAndConditions)||void 0===o?void 0:o.map((function(e){return Object(_.jsx)("li",{children:null===e||void 0===e?void 0:e.message},null===e||void 0===e?void 0:e.message)}))})})]},n)}(t,o):function(e,t){var n;return Object(_.jsxs)("div",{"data-testid":"coupon-container",className:"coupon-card-container text-only",children:[Object(_.jsxs)("div",{className:"coupon-card-content text-only",children:[Object(_.jsxs)("div",{className:j?"coupon-text-content coupon-text-only show":"coupon-text-content coupon-text-only",children:[O(e),Object(_.jsx)("h4",{"data-testid":"coupon-heading-block",className:"coupon-heading",children:Object(m.Qd)(null===e||void 0===e?void 0:e.heading)}),Object(_.jsx)("h5",{"data-testid":"coupon-desc-block",className:"coupon-desc",children:Object(m.Qd)(null===e||void 0===e?void 0:e.description)}),Object(_.jsxs)("h5",{"data-testid":"coupon-terms-btn",onClick:function(){return p(!j)},className:"coupon-terms",children:[Object(T.e)(v.q),Object(_.jsx)("img",{src:A.a,alt:"",className:j?"terms-arrow inverted":"terms-arrow"})]})]}),Object(_.jsx)("div",{className:"coupon-button-container",children:Object(_.jsx)(h.a,{"data-testid":"apply-button",disabled:null===e||void 0===e?void 0:e.isApplied,onClick:function(t){return s(t,null===e||void 0===e?void 0:e.discountCode)},className:"button whiteButton blackBorder","aria-label":Object(T.e)(v.m)+" "+(null===e||void 0===e?void 0:e.heading),children:Object(_.jsx)("span",{className:"btn-text",children:null!==e&&void 0!==e&&e.isApplied?Object(T.e)(v.l):Object(T.e)(v.m)})})})]}),Object(_.jsx)("div",{"data-testid":"terms-list-block",className:j?"terms-list show":"terms-list",children:Object(_.jsx)("ul",{className:"main-terms-list",children:null===e||void 0===e||null===(n=e.termsAndConditions)||void 0===n?void 0:n.map((function(e){return Object(_.jsx)("li",{children:null===e||void 0===e?void 0:e.message},null===e||void 0===e?void 0:e.message)}))})})]},t)}(t,o)})};y.defaultProps={data:{},cardType:"text",tenantId:"",id:Object(x.a)(),applyCoupon:function(){},tenantData:{}};var k=y,w=function(e){var t=e.contentData,n=e.tenantId,o=e.applyCoupon,r=e.tenantData,s=Object(a.useState)(null),d=Object(c.a)(s,2),l=d[0],u=d[1],j=Object(a.useState)(null),p=Object(c.a)(j,2),O=p[0],x=p[1],y=(Object(m.fb)(window.innerWidth),function(e){u(e===l?null:e),x(null)}),k=function(e,t){e.stopPropagation(),x(t===O?null:t)},w=function(e){return Object(_.jsx)(_.Fragment,{children:null!==e&&void 0!==e&&e.showTimer?Object(f.g)(null===e||void 0===e?void 0:e.endTime)&&Object(_.jsx)("p",{className:"coupon-time",children:Object(_.jsxs)("span",{"data-testid":"coupon-time-block",className:"coupon-time-block",children:[Object(_.jsx)("img",{className:"coupon-time-icon",src:N.a}),Object(_.jsx)(I.a,{endTime:null===e||void 0===e?void 0:e.endTime})]})}):Object(_.jsxs)("p",{className:"mr-btm-0",children:[(null===e||void 0===e?void 0:e.header)&&Object(_.jsx)("span",{className:"ml-rgt coupon-time",children:null===e||void 0===e?void 0:e.header}),Object(_.jsxs)("span",{className:"coupon-expiry-details",children:[Object(_.jsx)("img",{alt:"time_clock",src:E}),Object(_.jsxs)("span",{children:[Object(_.jsx)("span",{className:"capitalize",children:"Expires\xa0"})," on ",Object(f.f)(null===e||void 0===e?void 0:e.endTime)]})]})]})})};return Object(_.jsx)(i.a.Fragment,{children:t.map((function(e,t){return"image-text"===e.cardType?function(e,t){var c;return Object(_.jsxs)("div",{"data-testid":"coupon-text-component",onClick:function(){return y(t)},className:"coupon-card-container",children:[Object(_.jsxs)("div",{className:"coupon-card-content",children:[Object(_.jsxs)("div",{className:"coupon-mobile-content",children:[Object(_.jsxs)("div",{className:"coupon-mobile-image-text",children:[Object(_.jsx)("div",{className:"coupon-image-content",children:Object(_.jsx)(b.a,{className:"coupon-image",srcFile:Object(m.Eb)(null===e||void 0===e?void 0:e.imageSrc,r,!1,!1,!0),alt:"No-Image",defaultPath:"".concat(Object(g.a)(C.cb)).concat(n).concat(v.f)})}),Object(_.jsxs)("div",{className:"coupon-text-content with-image",children:[w(e),Object(_.jsx)("h4",{"data-testid":"coupon-heading-block",className:"coupon-heading",children:Object(m.Qd)(null===e||void 0===e?void 0:e.heading)})]})]}),Object(_.jsx)("div",{"data-testid":"coupon-accordian-content",className:l===t?"coupon-text-content coupon-below-image show":"coupon-text-content coupon-below-image",children:Object(_.jsxs)("div",{className:"coupon-accordion-content show",children:[Object(_.jsx)("h5",{"data-testid":"coupon-desc-block",className:"coupon-desc",children:Object(m.Qd)(null===e||void 0===e?void 0:e.description)}),Object(_.jsx)(h.a,{"data-testid":"apply-button",onClick:function(t){return o(t,null===e||void 0===e?void 0:e.discountCode)},disabled:null===e||void 0===e?void 0:e.isApplied,className:"button whiteButton coupon-button blackBorder",children:null!==e&&void 0!==e&&e.isApplied?Object(T.e)(v.l):Object(T.e)(v.m)}),Object(_.jsxs)("h5",{"data-testid":"coupon-terms-block",onClick:function(e){return k(e,t)},className:"coupon-terms",children:[Object(T.e)(v.q),Object(_.jsx)("img",{src:A.a,className:O===t?"terms-arrow inverted":"terms-arrow"})]})]})})]}),Object(_.jsx)("div",{"data-testid":"accordian-toggle-button",className:"coupon-accordian-button",children:Object(_.jsx)("img",{src:A.a,className:l===t?"coupon-accordian-arrow inverted":"coupon-accordian-arrow"})})]}),Object(_.jsx)("div",{"data-testid":"terms-list-block",className:O===t?"terms-list show":"terms-list",children:Object(_.jsx)("ul",{className:"main-terms-list",children:null===e||void 0===e||null===(c=e.termsAndConditions)||void 0===c?void 0:c.map((function(e){return Object(_.jsx)("li",{children:null===e||void 0===e?void 0:e.message},null===e||void 0===e?void 0:e.message)}))})})]},t)}(e,t):function(e,t){var n;return Object(_.jsxs)("div",{"data-testid":"coupon-text-component",onClick:function(){return y(t)},className:"coupon-card-container",children:[Object(_.jsxs)("div",{className:"coupon-card-content",children:[Object(_.jsxs)("div",{className:l===t?"coupon-text-content coupon-text-only show":"coupon-text-content coupon-text-only",children:[Object(_.jsxs)("div",{className:"coupon-text-limiter",children:[w(e),Object(_.jsx)("h4",{"data-testid":"coupon-heading-block",className:"coupon-heading",children:Object(m.Qd)(null===e||void 0===e?void 0:e.heading)})]}),Object(_.jsxs)("div",{className:l===t?"coupon-accordion-content show":"coupon-accordion-content","data-testid":"coupon-accordian-content",children:[Object(_.jsx)("h5",{className:"coupon-desc","data-testid":"coupon-desc-block",children:Object(m.Qd)(null===e||void 0===e?void 0:e.description)}),Object(_.jsx)(h.a,{className:"button whiteButton coupon-button blackBorder",disabled:null===e||void 0===e?void 0:e.isApplied,onClick:function(t){return o(t,null===e||void 0===e?void 0:e.discountCode)},"data-testid":"apply-button",children:null!==e&&void 0!==e&&e.isApplied?Object(T.e)(v.l):Object(T.e)(v.m)}),Object(_.jsxs)("h5",{className:"coupon-terms","data-testid":"coupon-terms-block",onClick:function(e){return k(e,t)},children:[Object(T.e)(v.q),Object(_.jsx)("img",{className:O===t?"terms-arrow inverted":"terms-arrow",src:A.a})]})]})]}),Object(_.jsx)("div",{className:"coupon-accordian-button","data-testid":"accordian-toggle-button",children:Object(_.jsx)("img",{className:l===t?"coupon-accordian-arrow inverted":"coupon-accordian-arrow",src:A.a})})]}),Object(_.jsx)("div",{className:O===t?"terms-list show":"terms-list","data-testid":"terms-list-block",children:Object(_.jsx)("ul",{"data-testid":"mainterms-list",className:"main-terms-list",children:null===e||void 0===e||null===(n=e.termsAndConditions)||void 0===n?void 0:n.map((function(e){return Object(_.jsx)("li",{id:"terms-list",children:null===e||void 0===e?void 0:e.message},null===e||void 0===e?void 0:e.message)}))})})]},t)}(e,t)}))})};w.defaultProps={contentData:[],tenantId:"",applyCoupon:null,tenantData:{}};var S=w,D=function(e){var t=e.isMobile,n=e.couponsData,o=e.tenantId,c=e.applyCoupon,a=e.tenantData,r=Object(f.i)(n);return Object(_.jsx)(i.a.Fragment,{children:t?Object(_.jsx)(S,{contentData:r,applyCoupon:c,tenantId:o,tenantData:a}):r.map((function(e,t){return Object(_.jsx)(k,{data:e,tenantId:o,cardType:null===e||void 0===e?void 0:e.cardType,id:t,applyCoupon:c,tenantData:a},t)}))})};D.defaultProps={isMobile:!1,couponsData:[],tenantId:"",applyCoupon:null,tenantData:{}};var P=D,M=n(47),L=n(3),Y=n(773),F=n(95),R=function(e){var t=e.isOpen,n=e.handleClose,i=e.bucketId,x=Object(s.c)((function(e){return e.tenantReducer})),g=Object(a.useContext)(j.a).userOrderStateDispatch,N=x.tenantId,E=void 0===N?"":N,A=x.componentOptions,I=void 0===A?{}:A,C=Object(a.useState)(Object(m.Uc)(window.innerWidth)),y=Object(c.a)(C,2),k=y[0],w=y[1],S=Object(a.useState)(""),D=Object(c.a)(S,2),R=D[0],B=D[1],H=Object(a.useState)(""),K=Object(c.a)(H,2),W=K[0],V=K[1],U=Object(a.useState)(!1),G=Object(c.a)(U,2),q=G[0],Q=G[1],z=Object(s.b)(),J=Object(s.c)((function(e){return e.cartReducer})),$=Object(s.c)((function(e){return e.appStateReducer})).userStatus,X=(void 0===$?{}:$).loggedIn,Z=void 0!==X&&X,ee=J.applicableCoupons,te=J.couponError,ne=J.cartData,oe=void 0===ne?{}:ne,ce=J.isCouponLoading,ae=void 0===ce||ce,ie=oe.discountLines,re=void 0===ie?[]:ie,se=Object(m.K)(ee);Object(a.useEffect)((function(){z(Object(l.h)({basketId:i,tenantId:E}))}),[]),Object(a.useEffect)((function(){Object(Y.e)(Object(T.e)(v.j),W)}),[W]),Object(a.useEffect)((function(){return window.addEventListener("resize",le),function(){window.removeEventListener("resize",le)}}));var de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.stopPropagation();var n=document.getElementById("coupon-top-div");null===n||void 0===n||n.scrollIntoView(!0),g({type:v.n,value:{couponErrorMessage:""}}),z(Object(l.b)({basketId:i,tenantId:E},{couponCode:t||R}));var o=t||R;B(o)};Object(a.useEffect)((function(){var e,t,o,c,a,r,s=re.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.name)===v.a}));(null===s||void 0===s?void 0:s.length)>(null===I||void 0===I||null===(e=I.coupons)||void 0===e?void 0:e.noOfCoupopnAllowed)&&z(Object(l.o)({basketId:i,tenantId:E,couponCode:null===(t=s[0])||void 0===t?void 0:t.couponCode}));!R||ae||q?q&&(g({type:v.n,value:{couponErrorMessage:""}}),Q(!1)):te&&null!==te&&void 0!==te&&te.errorCode?V(te.errors[0]):null!==re&&void 0!==re&&re.length&&(null===(o=re[(null===re||void 0===re?void 0:re.length)-1])||void 0===o||null===(c=o.status)||void 0===c?void 0:c.name)===v.a?(n("true"),M.b.dark(Object(_.jsxs)("div",{className:"img-text-div",children:[Object(_.jsx)(b.a,{srcFile:u.a})," ",Object(_.jsx)("span",{className:"text",children:Object(T.e)(v.p)})]}),{className:"coupon-toast-position",bodyClassName:"success-coupon-toast",hideProgressBar:!0,position:M.b.POSITION.BOTTOM_CENTER}),localStorage.setItem("expiryMessage",Object(T.e)(v.c)),setTimeout((function(){M.b.dismiss()}),3e3)):null!==re&&void 0!==re&&re.length&&(null===(a=re[(null===re||void 0===re?void 0:re.length)-1])||void 0===a||null===(r=a.status)||void 0===r?void 0:r.name)===v.g&&(V(Object(f.b)(re[(null===re||void 0===re?void 0:re.length)-1])),Q(!0))}),[te,re]);var le=function(){w(Object(m.Uc)(window.innerWidth))},ue=function(){B(""),V("")},be=k?{id:"CouponsModalPopup",role:"dialog",modalTitleId:"CouponsModalPopup",show:t,classNames:"coupons-module-modal",showCloseBtn:!0,closeButtonHandler:n,modalTitle:Object(T.e)(v.j),autoFocus:!0,closeDataTestId:"coupon-close",backDataTestId:"coupon-back"}:{id:"CouponsModalPopup",role:"dialog",modalTitleId:"CouponsModalPopup",show:t,classNames:"coupons-module-modal",showCloseBtn:!0,showBackBtn:!0,closeButtonHandler:n,backButtonHandler:n,modalTitle:Object(T.e)(v.j),autoFocus:!0,closeDataTestId:"coupon-close",backDataTestId:"coupon-back"},je=Object(r.a)({"coupon-text-box":!0,"error-msg":W});return Object(_.jsxs)(p.a,Object(o.a)(Object(o.a)({},be),{},{"data-testid":"modal-coupon-landing-page",children:[Object(_.jsx)("div",{className:"coupon-top-box coupon-border",id:"coupon-top-div",children:Object(_.jsxs)("div",{className:"coupon-top-content",children:[Object(_.jsxs)("div",{className:"coupon-discount-col-1",children:[Object(_.jsx)("h3",{"data-testid":"coupon-content-header",className:"coupon-content-header",children:Object(T.e)(v.i)}),Object(_.jsx)("p",{"data-testid":"coupon-content-desc",className:"coupon-content-desc",children:Object(T.e)(v.h)})]}),Object(_.jsxs)("div",{className:"coupon-discount-col-2",children:[Object(_.jsx)("label",{"data-testid":"coupon-input-label",className:"coupon-input-label",htmlFor:"modal-coupon-input",children:Object(T.e)(v.d)}),Object(_.jsxs)("div",{className:"flex-input-section",children:[Object(_.jsx)(O.a,{id:"modal-coupon-input",value:R,className:je,placeholder:"Enter code","data-testid":"modal-coupon-input-field",onChange:function(e){B(e.target.value),V("")}}),R.length>0&&Object(_.jsx)("button",{"data-testid":"coupon-cross-icon",className:"discount-button-img",onClick:function(){return ue()},onKeyPress:function(){return ue()},"aria-label":"Clear Discount Code"})]}),W&&Object(_.jsxs)("div",{role:"alert",children:[Object(_.jsx)("img",{className:"",src:d.a,alt:"invalid"})," ",Object(_.jsx)("span",{"data-testid":"coupon-err-msg",className:"error-msg error-container-coupon",children:W})]})]}),Object(_.jsx)("div",{className:"coupon-discount-col-3",children:Object(_.jsx)(h.a,{"aria-label":Object(T.e)(v.b),id:"btn-apply-view","data-testid":"coupon-apply-btn",className:"button whiteButton blackBorder coupon-button",disabled:!(null!==R&&void 0!==R&&R.length),onClick:function(e){return de(e,"")},children:Object(T.e)(v.b)})})]})}),Object(_.jsxs)("div",{className:"coupon-mid-box",children:[Object(_.jsx)("h3",{"data-testid":"modal-mid-header",className:"modal-mid-header",children:Object(T.e)(v.k)}),!Z&&Object(_.jsx)("span",{onClick:function(){Object(F.b)()},"data-id":L.M.HEADER_SIGN_IN_ATTR_DATA_ID,"data-testid":"modal-mid-desc",tabIndex:"0",className:"modal-mid-desc",children:Object(T.e)(v.t)})]}),Object(_.jsx)(P,{"data-testid":"coupons-list",isMobile:k,applyCoupon:de,tenantId:E,couponsData:se,tenantData:x})]}))};R.defaultProps={isOpen:!1,closeModal:null};t.a=R}}]);